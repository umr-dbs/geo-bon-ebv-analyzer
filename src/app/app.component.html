<mat-sidenav-container fullscreen>
    <mat-sidenav position="end" mode="side" opened (openedChange)="mapComponent.resize()">
        <wave-ebv-ebv-selector></wave-ebv-ebv-selector>
    </mat-sidenav>
    <div class="time-container" fxLayoutAlign="space-around center">
        <wave-zoom-handles (zoomIn)="map.zoomIn()" (zoomOut)="map.zoomOut()" class="mat-elevation-z4"></wave-zoom-handles>
        <div class="channel-as-time">
            <wave-layer-list-workflow-parameter-slider
                [layer]="getFirstLayerStream() | async"
                parameterName="channelConfig"
                parameterDisplayName="time"
            >
            </wave-layer-list-workflow-parameter-slider>
        </div>
        <!-- <wave-ticker-interaction *ngIf="config.COMPONENTS.PLAYBACK.AVAILABLE" class="mat-elevation-z4"></wave-ticker-interaction>-->
        <div></div> <!-- moves Time Interaction to center (cf. space-around @ flex) -->
    </div>

    <wave-map-container #map [grid]="mapIsGrid$ | async">
        <ng-template ngFor let-layer [ngForOf]="layersReverse$ | async">
            <ng-template [ngIf]="layer.operator.resultType === ResultTypes.POINTS">
                <wave-ol-point-layer [layer]="layer"
                                     (mapRedraw)="map.layerForcesRedraw()"></wave-ol-point-layer>
            </ng-template>
            <ng-template [ngIf]="layer.operator.resultType === ResultTypes.LINES">
                <wave-ol-line-layer [layer]="layer"
                                    (mapRedraw)="map.layerForcesRedraw()"></wave-ol-line-layer>
            </ng-template>
            <ng-template [ngIf]="layer.operator.resultType === ResultTypes.POLYGONS">
                <wave-ol-polygon-layer [layer]="layer"
                                       (mapRedraw)="map.layerForcesRedraw()"></wave-ol-polygon-layer>
            </ng-template>
            <ng-template [ngIf]="layer.operator.resultType === ResultTypes.RASTER">
                <wave-ol-raster-layer [layer]="layer"
                                      (mapRedraw)="map.layerForcesRedraw()"></wave-ol-raster-layer>
            </ng-template>
        </ng-template>
    </wave-map-container>

    <wave-ebv-legend [layer]="$any(singleLayer$ | async)"></wave-ebv-legend>
</mat-sidenav-container>
